<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Search</title>
    <link rel="stylesheet" href="searchstyle.css">
</head>
<body>
    <button onclick ="location.href='index.html'">Home</button>
    <!-- <h1><u>Search for Recipes</u></h1>
    <form action = "HandleInput.java" method = "post">
        <label for="Allergens">Allergens:</label>
        <select id="Allergens">
            <option value="Gluten">Gluten</option>
            <option value="Lactose">Lactose</option>
            <option value="Gluten">Gluten</option>
            <option value="Nuts">Nuts</option>
            <option value="Eggs">Eggs</option>
            <option value="Sugar">Sugar</option>
            <option value="None">None</option>
        </select>
        <label for="CookMethod">Cook Method:</label>
        <select id="CookMethod">
            <option value="Oven">Oven</option>
            <option value="Stove">Stove</option>
            <option value="Air Fryer">Air Fryer</option>
            <option value="Microwave">Microwave</option>
            <option value="No Cook">No Cook</option>
            <option value="Fridge">Fridge</option>
            <option value="Dorm">Dorm</option>
            <option value="All">All</option>
        </select>
        <br>
        <button type="submit">Submit</button>
    </form> -->
<div id="status">Loading...</div>
<div id="recipeDisplay"></div>

<script>
const csvUrl = "recipeOut.csv";

fetch(csvUrl)
    .then(response => response.text())
    .then(csvText => {
        document.getElementById("status").textContent = "Recipes Available";

        // Clean CSV text and split into lines
        const lines = csvText.trim().split(/\r?\n/).filter(line => line.trim() !== "");

        // Initialize HTML string
        let html = "";

        // Loop through all lines (all recipes)
        lines.forEach(line => {
            const values = line.split(",");

            const id = values[0] || "";
            const name = values[1] || "";
            const ingredient = values[2] || "";
            const cookingTime = values[3] || "";
            const cookMethod = values[4] || "";
            const allergens = values[5] || "";

            const instructions = values.slice(6).join(",") || "";

            html += `
                <div class="varBox"><strong>Name:</strong> ${name}</div>
                <div class="varBox"><strong>Ingredient List:</strong> ${ingredient}</div>
                <div class="varBox"><strong>Cooking Time:</strong> ${cookingTime}</div>
                <div class="varBox"><strong>Cooking Method:</strong> ${cookMethod}</div>
                <div class="varBox"><strong>Allergens:</strong> ${allergens}</div>
                <div class="varBox"><strong>Instructions:</strong> ${instructions}</div>
                <hr>
            `;
        });

        // Insert all recipes into the page
        document.getElementById("recipeDisplay").innerHTML = html;
    })
    .catch(err => {
        document.getElementById("status").textContent = "Error loading recipeOut.csv";
        console.error(err);
    });
</script>
</body>
</html>